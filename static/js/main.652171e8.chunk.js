(this["webpackJsonpsmart-classroom-dashboard"]=this["webpackJsonpsmart-classroom-dashboard"]||[]).push([[0],{134:function(e,t,n){},135:function(e,t,n){},244:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(10),c=n.n(a),s=n(19),u=(n(134),n(18)),i=n(84),l=n(14),b=n(282),d=n(117),j=n(283),h=n(284),g=n(281),m=(n(135),n(66)),f=localStorage.getItem("token"),O={loggedIn:!!f,token:f},p=Object(m.b)({name:"auth",initialState:O,reducers:{login:function(e,t){e.loggedIn=!0,e.token=t.payload,localStorage.setItem("token",t.payload)},logout:function(e){e.loggedIn=!1,e.token="",localStorage.removeItem("token")}}}),x=p.actions,v=x.login,y=x.logout,k=p.reducer,C=n(287),S=n(285),I=n(8),w=function(e){var t=e.onSensorChange,n=Object(r.useState)([]),o=Object(u.a)(n,2),a=o[0],c=o[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),b=l[0],d=l[1],j=Object(s.b)(),h=Object(s.c)((function(e){return e.auth}));Object(r.useEffect)((function(){if(h.loggedIn){var e=new Headers;e.set("Authorization","Basic ".concat(h.token)),fetch('https://glusfqycvwrucp9-db202012181437.adb.eu-zurich-1.oraclecloudapps.com/ords/sensor_datalake/sens/sensors?q={"$orderby":{"title":"asc"}}',{method:"GET",headers:e}).then((function(e){return e.ok?e.json():(j(y()),Promise.reject(new Error(e.statusText)))})).then((function(e){var n,r,o=null!==(n=null===(r=e.items[0])||void 0===r?void 0:r.uuid)&&void 0!==n?n:"";c(e.items),t(o),d(o)})).catch((function(e){console.log(e),t(""),d("")}))}else c([])}),[j,t,h]);var g=a.map((function(e){return Object(I.jsx)(C.a,{value:e.uuid,children:e.title},e.uuid)}));return Object(I.jsx)(S.a,{value:b,onChange:function(e){var n=e.target.value;t(n),d(n)},children:g})},E=n(118),T=(n(243),function(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),o=n[0],a=n[1],c=Object(s.c)((function(e){return e.auth})),i=Object(s.b)();Object(r.useEffect)((function(){var t=function(){if(c.loggedIn&&e.sensor){var t='https://glusfqycvwrucp9-db202012181437.adb.eu-zurich-1.oraclecloudapps.com/ords/sensor_datalake/sens/measurements?q={"sensor_uuid":{"$eq":"'.concat(e.sensor,'"},"$orderby":{"insert_timestamp":"desc"}}'),n=new Headers;n.set("Authorization","Basic ".concat(c.token)),fetch(t,{method:"GET",headers:n}).then((function(e){return e.ok?e.json():(i(y()),Promise.reject(new Error(e.statusText)))})).then((function(e){a(e.items)})).catch((function(e){return console.log(e)}))}else a([])};t();var n=setInterval((function(){t()}),3e4);return function(){return clearInterval(n)}}),[i,e,c]);var l={datasets:[{label:"CO2",data:o.map((function(e){return{x:e.insert_timestamp,y:e.co2}})),fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)"},{label:"Temperature",data:o.map((function(e){return{x:e.insert_timestamp,y:e.temperature}})),fill:!1,backgroundColor:"rgb(255, 159, 64)",borderColor:"rgba(255, 159, 64, 0.2)"},{label:"Humidity",data:o.map((function(e){return{x:e.insert_timestamp,y:e.humidity}})),fill:!1,backgroundColor:"rgb(255, 205, 86)",borderColor:"rgba(255, 205, 86, 0.2)"}]};return Object(I.jsx)("div",{className:"Chart",children:Object(I.jsx)(E.a,{type:"line",data:l,options:{animation:!1,scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm",day:"DD.MM.YYYY"}}},y:{suggestedMin:0}}}})})}),_=(n(244),n(286)),q=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(""),c=Object(u.a)(a,2),i=c[0],l=c[1],b=Object(s.b)();return Object(I.jsx)("div",{className:"login-wrapper",children:Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b(v(btoa("".concat(n,":").concat(i))))},children:[Object(I.jsx)(_.a,{label:"Username",onChange:function(e){return o(e.target.value)}}),Object(I.jsx)(_.a,{type:"password",label:"Password",onChange:function(e){return l(e.target.value)}}),Object(I.jsx)(g.a,{type:"submit",children:"Login"})]})})},F=function(){return Object(s.b)()(y()),Object(I.jsx)(l.a,{to:"/"})};var H=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(s.c)((function(e){return e.auth})),m=Object(b.a)("(prefers-color-scheme: dark)"),f=o.a.useMemo((function(){return Object(d.a)({palette:{type:m?"dark":"light"}})}),[m]);return c.loggedIn?Object(I.jsxs)(j.a,{theme:f,children:[Object(I.jsx)(h.a,{}),Object(I.jsx)(i.a,{children:Object(I.jsxs)(l.d,{children:[Object(I.jsx)(l.b,{path:"/logout",children:Object(I.jsx)(F,{})}),Object(I.jsxs)(l.b,{path:"/",children:[Object(I.jsx)(w,{onSensorChange:a}),Object(I.jsx)(g.a,{component:i.b,to:"/logout",children:"Logout"}),Object(I.jsx)(T,{sensor:n})]})]})})]}):Object(I.jsxs)(j.a,{theme:f,children:[Object(I.jsx)(h.a,{}),Object(I.jsx)(q,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,289)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)}))},P=Object(m.a)({reducer:{auth:k}});c.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(s.a,{store:P,children:Object(I.jsx)(H,{})})}),document.getElementById("root")),M()}},[[248,1,2]]]);
//# sourceMappingURL=main.652171e8.chunk.js.map