(this["webpackJsonpsmart-classroom-dashboard"]=this["webpackJsonpsmart-classroom-dashboard"]||[]).push([[0],{202:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(76),o=n.n(r),i=(n(86),n(1)),c=n(2),u=n(10),h=n(4),l=n(3),d=n(79),b=n(6),j=(n(87),n(5)),p=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).state={sensor:"",items:[]},s.handleChange=s.handleChange.bind(Object(u.a)(s)),s}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new Headers;t.set("Authorization","Basic ".concat(this.props.token)),fetch('https://glusfqycvwrucp9-db202012181437.adb.eu-zurich-1.oraclecloudapps.com/ords/sensor_datalake/sens/sensors?q={"$orderby":{"title":"asc"}}',{method:"GET",headers:t}).then((function(t){return t.ok?t.json():(e.props.setToken(!1),Promise.reject(new Error(t.statusText)))})).then((function(t){var n,s,a=null!==(n=null===(s=t.items[0])||void 0===s?void 0:s.uuid)&&void 0!==n?n:"";e.setState({sensor:a,items:t.items}),e.props.onSensorChange(a)})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){this.setState((function(t){return t.sensor=e.target.value,t})),this.props.onSensorChange(e.target.value)}},{key:"render",value:function(){var e=this.state.items.map((function(e){return Object(j.jsx)("option",{value:e.uuid,children:e.title},e.uuid)}));return Object(j.jsx)("select",{onChange:this.handleChange,children:e})}}]),n}(a.a.Component),m=n(81),f=(n(194),function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).state={items:[]},s}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){e.sensor!==this.props.sensor&&this.fetchData()}},{key:"fetchData",value:function(){var e=this,t='https://glusfqycvwrucp9-db202012181437.adb.eu-zurich-1.oraclecloudapps.com/ords/sensor_datalake/sens/measurements?q={"sensor_uuid":{"$eq":"'.concat(this.props.sensor,'"},"$orderby":{"insert_timestamp":"desc"}}'),n=new Headers;n.set("Authorization","Basic ".concat(this.props.token)),fetch(t,{method:"GET",headers:n}).then((function(t){return t.ok?t.json():(e.props.setToken(!1),Promise.reject(new Error(t.statusText)))})).then((function(t){e.setState({items:t.items})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.items,t={datasets:[{label:"CO2",data:e.map((function(e){return{x:e.insert_timestamp,y:e.co2}})),fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)"},{label:"Temperature",data:e.map((function(e){return{x:e.insert_timestamp,y:e.temperature}})),fill:!1,backgroundColor:"rgb(255, 159, 64)",borderColor:"rgba(255, 159, 64, 0.2)"},{label:"Humidity",data:e.map((function(e){return{x:e.insert_timestamp,y:e.humidity}})),fill:!1,backgroundColor:"rgb(255, 205, 86)",borderColor:"rgba(255, 205, 86, 0.2)"}]};return Object(j.jsx)("div",{className:"Chart",children:Object(j.jsx)(m.a,{data:t,options:{animation:!1,scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm",day:"DD.MM.YYYY"}}},y:{suggestedMin:0}}}})})}}]),n}(a.a.Component)),g=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).state={username:"",password:""},s.handleSubmit=s.handleSubmit.bind(Object(u.a)(s)),s}return Object(c.a)(n,[{key:"setUsername",value:function(e){this.setState((function(t){return t.username=e,t}))}},{key:"setPassword",value:function(e){this.setState((function(t){return t.password=e,t}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.setToken(btoa("".concat(this.state.username,":").concat(this.state.password)))}},{key:"render",value:function(){var e=this;return Object(j.jsx)("div",{className:"login-wrapper",children:Object(j.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(j.jsxs)("label",{children:[Object(j.jsx)("p",{children:"Username"}),Object(j.jsx)("input",{type:"text",onChange:function(t){return e.setUsername(t.target.value)}})]}),Object(j.jsxs)("label",{children:[Object(j.jsx)("p",{children:"Password"}),Object(j.jsx)("input",{type:"password",onChange:function(t){return e.setPassword(t.target.value)}})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"Login"})})]})})}}]),n}(a.a.Component),k=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).state={sensor:"",token:localStorage.getItem("token")},e.handleSensorChange=e.handleSensorChange.bind(Object(u.a)(e)),e.setToken=e.setToken.bind(Object(u.a)(e)),e}return Object(c.a)(n,[{key:"handleSensorChange",value:function(e){this.setState((function(t){return t.sensor=e,t}))}},{key:"setToken",value:function(e){this.setState((function(t){return t.token=e,t})),localStorage.setItem("token",e)}},{key:"getToken",value:function(){return this.state.token}},{key:"render",value:function(){var e=this.getToken();return e?Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsx)(d.a,{children:Object(j.jsxs)(b.c,{children:[Object(j.jsx)(b.a,{path:"/logout",children:Object(j.jsx)("h1",{children:"Logout"})}),Object(j.jsxs)(b.a,{path:"/",children:[Object(j.jsx)(p,{token:e,setToken:this.setToken,onSensorChange:this.handleSensorChange}),Object(j.jsx)(f,{token:e,setToken:this.setToken,sensor:this.state.sensor})]})]})})}):Object(j.jsx)(g,{setToken:this.setToken})}}]),n}(a.a.Component),v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,203)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),s(e),a(e),r(e),o(e)}))};o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root")),v()},86:function(e,t,n){},87:function(e,t,n){}},[[202,1,2]]]);
//# sourceMappingURL=main.09d68d3c.chunk.js.map