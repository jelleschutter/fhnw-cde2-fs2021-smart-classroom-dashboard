(this["webpackJsonpsmart-classroom-dashboard"]=this["webpackJsonpsmart-classroom-dashboard"]||[]).push([[0],{140:function(e,t,n){},141:function(e,t,n){},250:function(e,t,n){},258:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),o=n.n(c),s=n(21),i=n(306),u=(n(140),n(19)),l=n(70),b=n(15),j=(n(141),n(71)),d=localStorage.getItem("token"),h={loggedIn:!!d,token:d},m=Object(j.b)({name:"auth",initialState:h,reducers:{login:function(e,t){e.loggedIn=!0,e.token=t.payload,localStorage.setItem("token",t.payload)},logout:function(e){e.loggedIn=!1,e.token="",localStorage.removeItem("token")}}}),O=m.actions,g=O.login,f=O.logout,x=m.reducer,p=n(309),v=n(307),y=n(6),k=function(e){var t=e.onSensorChange,n=Object(r.useState)([]),a=Object(u.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),b=l[0],j=l[1],d=Object(s.b)(),h=Object(s.c)((function(e){return e.auth}));Object(r.useEffect)((function(){if(h.loggedIn){var e=new Headers;e.set("Authorization","Basic ".concat(h.token)),fetch('https://glusfqycvwrucp9-db202012181437.adb.eu-zurich-1.oraclecloudapps.com/ords/sensor_datalake/sens/sensors?q={"$orderby":{"title":"asc"}}',{method:"GET",headers:e}).then((function(e){return e.ok?e.json():(d(f()),Promise.reject(new Error(e.statusText)))})).then((function(e){var n,r,a=null!==(n=null===(r=e.items[0])||void 0===r?void 0:r.uuid)&&void 0!==n?n:"";o(e.items),t(a),j(a)})).catch((function(e){console.log(e),t(""),j("")}))}else o([])}),[d,t,h]);var m=c.map((function(e){return Object(y.jsx)(p.a,{value:e.uuid,children:e.title},e.uuid)}));return Object(y.jsx)(v.a,{value:b,onChange:function(e){var n=e.target.value;t(n),j(n)},children:m})},C=n(122),S=(n(249),function(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],o=Object(s.c)((function(e){return e.auth})),i=Object(s.b)();Object(r.useEffect)((function(){var t=function(){if(o.loggedIn&&e.sensor){var t='https://glusfqycvwrucp9-db202012181437.adb.eu-zurich-1.oraclecloudapps.com/ords/sensor_datalake/sens/measurements?q={"sensor_uuid":{"$eq":"'.concat(e.sensor,'"},"$orderby":{"insert_timestamp":"desc"}}'),n=new Headers;n.set("Authorization","Basic ".concat(o.token)),fetch(t,{method:"GET",headers:n}).then((function(e){return e.ok?e.json():(i(f()),Promise.reject(new Error(e.statusText)))})).then((function(e){c(e.items)})).catch((function(e){return console.log(e)}))}else c([])};t();var n=setInterval((function(){t()}),3e4);return function(){return clearInterval(n)}}),[i,e,o]);var l={datasets:[{label:"CO2",data:a.map((function(e){return{x:e.insert_timestamp,y:e.co2}})),fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)"},{label:"Temperature",data:a.map((function(e){return{x:e.insert_timestamp,y:e.temperature}})),fill:!1,backgroundColor:"rgb(255, 159, 64)",borderColor:"rgba(255, 159, 64, 0.2)"},{label:"Humidity",data:a.map((function(e){return{x:e.insert_timestamp,y:e.humidity}})),fill:!1,backgroundColor:"rgb(255, 205, 86)",borderColor:"rgba(255, 205, 86, 0.2)"}]};return Object(y.jsx)("div",{className:"Chart",children:Object(y.jsx)(C.a,{type:"line",data:l,options:{animation:!1,scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm",day:"DD.MM.YYYY"}}},y:{suggestedMin:0}}}})})}),I=(n(250),n(260)),w=n(299),E=n(308),T=n(300),_=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(u.a)(c,2),i=o[0],l=o[1],b=Object(s.b)();return Object(y.jsx)("div",{className:"login-wrapper",children:Object(y.jsx)(I.a,{children:Object(y.jsx)("form",{onSubmit:function(e){e.preventDefault(),b(g(btoa("".concat(n,":").concat(i))))},children:Object(y.jsxs)(w.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,children:[Object(y.jsx)(w.a,{item:!0,children:Object(y.jsx)(E.a,{label:"Username",onChange:function(e){return a(e.target.value)}})}),Object(y.jsx)(w.a,{item:!0,children:Object(y.jsx)(E.a,{type:"password",label:"Password",onChange:function(e){return l(e.target.value)}})}),Object(y.jsx)(w.a,{item:!0,children:Object(y.jsx)(T.a,{type:"submit",children:"Login"})})]})})})})},B=function(){return Object(s.b)()(f()),Object(y.jsx)(b.a,{to:"/"})},q=n(301),F=n(311),H=n(302),N=n(303),P=n(305),z=n(304),D=n(121),G=n.n(D),L=Object(q.a)((function(e){return Object(F.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})})),M=function(){var e=L();return Object(y.jsx)("div",{className:e.root,children:Object(y.jsx)(H.a,{position:"static",children:Object(y.jsxs)(N.a,{children:[Object(y.jsx)(z.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(y.jsx)(G.a,{})}),Object(y.jsx)(P.a,{variant:"h6",className:e.title,children:"Smart Classroom"}),Object(y.jsx)(T.a,{component:l.b,color:"inherit",to:"/logout",children:"Logout"})]})})})};var Y=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(s.c)((function(e){return e.auth})).loggedIn?Object(y.jsxs)(l.a,{children:[Object(y.jsx)(M,{}),Object(y.jsxs)(b.d,{children:[Object(y.jsx)(b.b,{path:"/logout",children:Object(y.jsx)(B,{})}),Object(y.jsxs)(b.b,{path:"/",children:[Object(y.jsx)(k,{onSensorChange:a}),Object(y.jsx)(S,{sensor:n})]})]})]}):Object(y.jsx)(_,{})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,312)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},A=Object(j.a)({reducer:{auth:x}});o.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsxs)(s.a,{store:A,children:[Object(y.jsx)(i.a,{}),Object(y.jsx)(Y,{})]})}),document.getElementById("root")),$()}},[[258,1,2]]]);
//# sourceMappingURL=main.2725c445.chunk.js.map