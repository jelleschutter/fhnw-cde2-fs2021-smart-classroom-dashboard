{"version":3,"sources":["components/Filter/Filter.js","components/Chart/Chart.js","components/Login/Login.js","App.js","reportWebVitals.js","index.js"],"names":["Filter","props","state","sensor","items","handleChange","bind","headers","Headers","set","this","token","fetch","method","then","result","ok","json","setToken","Promise","reject","Error","statusText","uuid","setState","onSensorChange","catch","error","console","log","event","target","value","options","map","title","onChange","React","Component","Chart","fetchData","prevProps","url","data","datasets","label","o","x","insert_timestamp","y","co2","fill","backgroundColor","borderColor","temperature","humidity","className","animation","scales","type","time","unit","displayFormats","hour","day","suggestedMin","Login","username","password","handleSubmit","e","preventDefault","btoa","onSubmit","setUsername","setPassword","App","localStorage","getItem","handleSensorChange","setItem","getToken","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.09d68d3c.chunk.js","sourcesContent":["import React from 'react';\n\nclass Filter extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sensor: '',\n      items: []\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    const url = `https://glusfqycvwrucp9-db202012181437.adb.eu-zurich-1.oraclecloudapps.com/ords/sensor_datalake/sens/sensors?q={\"$orderby\":{\"title\":\"asc\"}}`;\n    const headers = new Headers();\n    headers.set('Authorization', `Basic ${this.props.token}`);\n    fetch(url, {\n      method: 'GET',\n      headers\n    })\n      .then(result => {\n        if (result.ok) {\n          return result.json();\n        }\n        this.props.setToken(false);\n        return Promise.reject(new Error(result.statusText));\n      })\n      .then((result) => {\n        const sensor = result.items[0]?.uuid ?? '';\n        this.setState({\n          sensor: sensor,\n          items: result.items\n        });\n        this.props.onSensorChange(sensor);\n      })\n      .catch((error) => console.log(error));\n  }\n\n  handleChange(event) {\n    this.setState((state) => {\n      state.sensor = event.target.value;\n      return state;\n    });\n    this.props.onSensorChange(event.target.value);\n  }\n\n  render() {\n    const { items } = this.state;\n    const options = items.map(sensor => <option key={sensor.uuid} value={sensor.uuid}>{sensor.title}</option>)\n    return (\n      <select onChange={this.handleChange}>\n        {options}\n      </select>\n    )\n  }\n}\n\nexport default Filter;\n","import React from 'react';\nimport { Line } from 'react-chartjs-2';\nimport 'chartjs-adapter-moment';\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.sensor !== this.props.sensor) {\n      this.fetchData();\n    }\n  }\n\n  fetchData() {\n    const url = `https://glusfqycvwrucp9-db202012181437.adb.eu-zurich-1.oraclecloudapps.com/ords/sensor_datalake/sens/measurements?q={\"sensor_uuid\":{\"$eq\":\"${this.props.sensor}\"},\"$orderby\":{\"insert_timestamp\":\"desc\"}}`;\n    const headers = new Headers();\n    headers.set('Authorization', `Basic ${this.props.token}`);\n    fetch(url, {\n      method: 'GET',\n      headers\n    })\n      .then(result => {\n        if (result.ok) {\n          return result.json();\n        }\n        this.props.setToken(false);\n        return Promise.reject(new Error(result.statusText));\n      })\n      .then((result) => {\n        this.setState({\n          items: result.items\n        });\n      })\n      .catch((error) => console.log(error));\n  }\n\n  render() {\n    const { items } = this.state;\n    const data = {\n      datasets: [\n        {\n          label: 'CO2',\n          data: items.map(o => ({\n            x: o.insert_timestamp,\n            y: o.co2\n          })),\n          fill: false,\n          backgroundColor: 'rgb(255, 99, 132)',\n          borderColor: 'rgba(255, 99, 132, 0.2)',\n        },\n        {\n          label: 'Temperature',\n          data: items.map(o => ({\n            x: o.insert_timestamp,\n            y: o.temperature\n          })),\n          fill: false,\n          backgroundColor: 'rgb(255, 159, 64)',\n          borderColor: 'rgba(255, 159, 64, 0.2)',\n        },\n        {\n          label: 'Humidity',\n          data: items.map(o => ({\n            x: o.insert_timestamp,\n            y: o.humidity\n          })),\n          fill: false,\n          backgroundColor: 'rgb(255, 205, 86)',\n          borderColor: 'rgba(255, 205, 86, 0.2)',\n        }\n      ]\n    };\n\n    const options = {\n      animation: false,\n      scales: {\n        x: {\n          type: 'time',\n          time: {\n            unit: 'hour',\n            displayFormats: {\n              hour: 'HH:mm',\n              day: 'DD.MM.YYYY'\n            }\n          }\n        },\n        y: {\n          suggestedMin: 0,\n        }\n      }\n    };\n    return (\n      <div className=\"Chart\">\n        <Line data={data} options={options} />\n      </div>\n    )\n  }\n}\n\nexport default Chart;\n","import React from 'react';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      username: '',\n      password: ''\n    }\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  setUsername(username) {\n    this.setState((state) => {\n      state.username = username;\n      return state;\n    });\n  }\n\n  setPassword(password) {\n    this.setState((state) => {\n      state.password = password;\n      return state;\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    this.props.setToken(btoa(`${this.state.username}:${this.state.password}`))\n  }\n\n  render() {\n    return (\n      <div className=\"login-wrapper\">\n        <form onSubmit={this.handleSubmit}>\n          <label>\n            <p>Username</p>\n            <input type=\"text\" onChange={(e) => this.setUsername(e.target.value)} />\n          </label>\n          <label>\n            <p>Password</p>\n            <input type=\"password\" onChange={(e) => this.setPassword(e.target.value)} />\n          </label>\n          <div>\n            <button type=\"submit\">Login</button>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport './App.css';\nimport Filter from './components/Filter/Filter';\nimport Chart from './components/Chart/Chart';\nimport Login from './components/Login/Login';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      sensor: '',\n      token: localStorage.getItem('token')\n    };\n\n    this.handleSensorChange = this.handleSensorChange.bind(this);\n    this.setToken = this.setToken.bind(this);\n  }\n\n  handleSensorChange(sensor) {\n    this.setState((state) => {\n      state.sensor = sensor;\n      return state;\n    });\n  }\n\n  setToken(token) {\n    this.setState((state) => {\n      state.token = token;\n      return state;\n    });\n    localStorage.setItem('token', token);\n  }\n\n  getToken() {\n    return this.state.token;\n  }\n\n  render() {\n    const token = this.getToken()\n\n    if (!token) {\n      return <Login setToken={this.setToken} />\n    }\n\n    return (\n      <div className=\"wrapper\">\n        <Router>\n          <Switch>\n            <Route path=\"/logout\">\n              <h1>Logout</h1>\n            </Route>\n            <Route path=\"/\">\n              <Filter token={token} setToken={this.setToken} onSensorChange={this.handleSensorChange} />\n              <Chart token={token} setToken={this.setToken} sensor={this.state.sensor} />\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}