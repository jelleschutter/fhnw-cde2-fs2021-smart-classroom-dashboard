{"version":3,"sources":["features/auth/authSlice.ts","store.js","helpers/Request.ts","features/explore/Chart.tsx","features/explore/Explore.tsx","features/auth/Login.tsx","features/auth/Logout.tsx","features/nav/CustomAppBar.tsx","features/dashboard/DashboardItem.tsx","features/dashboard/Dashboard.tsx","App.tsx","reportWebVitals.js","index.js"],"names":["initialToken","localStorage","getItem","initialState","loggedIn","token","authSlice","createSlice","name","reducers","login","state","action","payload","setItem","logout","removeItem","actions","configureStore","reducer","auth","authReducer","request","url","query","options","store","getState","fullUrl","queryParams","push","JSON","stringify","Object","keys","forEach","key","length","join","headers","Headers","set","fetch","method","then","result","ok","json","dispatch","Promise","reject","Error","statusText","requestItems","items","hasMore","updatedOptions","offset","count","concat","Chart","data","datasets","label","map","o","x","insert_timestamp","y","co2","fill","backgroundColor","borderColor","temperature","humidity","distance","type","animation","scales","time","unit","displayFormats","hour","day","suggestedMin","Explore","useState","sensor","setSensor","setItems","uuid","useParams","useEffect","fetchData","date","Date","setHours","getHours","$gte","$date","toISOString","$orderby","catch","error","console","log","undefined","id","setInterval","clearInterval","Container","title","Login","username","setUsername","password","setPassword","useDispatch","className","Paper","onSubmit","event","preventDefault","btoa","Grid","container","direction","justify","alignItems","spacing","item","TextField","onChange","e","target","value","Button","Logout","to","useStyles","makeStyles","theme","createStyles","root","flexGrow","menuButton","marginRight","color","textDecoration","CustomAppBar","classes","AppBar","position","Toolbar","IconButton","edge","aria-label","Typography","component","Link","variant","minWidth","fontSize","attribute","marginTop","overflow","textOverflow","whiteSpace","DashboardItem","latestMeasurement","setLatestMeasurement","Card","CardContent","gutterBottom","toFixed","CardActions","size","display","flexWrap","margin","width","Dashboard","dashboardItems","App","useSelector","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.fdc923d2.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\n\nconst initialToken = localStorage.getItem('token');\n\nconst initialState = {\n  loggedIn: !!initialToken,\n  token: initialToken\n}\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    login(state, action) {\n      state.loggedIn = true;\n      state.token = action.payload;\n      localStorage.setItem('token', action.payload);\n    },\n    logout(state) {\n      state.loggedIn = false;\n      state.token = '';\n      localStorage.removeItem('token');\n    }\n  }\n});\n\nexport const { login, logout } = authSlice.actions;\n\nexport default authSlice.reducer","import { configureStore } from '@reduxjs/toolkit';\n\nimport authReducer from './features/auth/authSlice';\n\nexport default configureStore({\n  reducer: {\n    auth: authReducer\n  }\n});","import store from '../store';\nimport { logout } from '../features/auth/authSlice';\n\ntype OracleDate = {\n  $date: string\n}\n\ntype QueryParameter = {\n  $eq?: string | number | OracleDate,\n  $ne?: string | number | OracleDate,\n  $lt?:  number | OracleDate,\n  $lte?: number | OracleDate,\n  $gt?: number | OracleDate,\n  $gte?: number | OracleDate,\n  $instr?: string ,\n  $ninstr?: string,\n  $like?: string,\n  $null?: null,\n  $notnull?: null,\n  $between?: [string | OracleDate, string | OracleDate]\n}\n\ntype OrderByParameter = {\n  [key: string]: string\n}\n\ntype RestQuery = {\n  [key: string]: string | QueryParameter | OrderByParameter\n}\n\ntype Options = {\n  limit?: string | number,\n  offset?: string | number,\n  [key: string]: string | number | undefined\n}\n\nexport const request = (url: string, query?: RestQuery, options?: Options) => {\n  const auth = store.getState().auth;\n  let fullUrl = `https://glusfqycvwrucp9-db202012181437.adb.eu-zurich-1.oraclecloudapps.com/ords/sensor_datalake/sens${url}`;\n  const queryParams = [];\n  if (query) {\n    queryParams.push(`q=${JSON.stringify(query)}`);\n  }\n  if (options) {\n    Object.keys(options).forEach(key => {\n      queryParams.push(`${key}=${options[key]}`);\n    });\n  }\n  if (queryParams.length > 0) {\n    fullUrl += `?${queryParams.join('&')}`;\n  }\n  const headers = new Headers();\n  headers.set('Authorization', `Basic ${auth.token}`);\n  return fetch(fullUrl, {\n    method: 'GET',\n    headers\n  })\n    .then(result => {\n      if (result.ok) {\n        return result.json();\n      }\n      store.dispatch(\n        logout()\n      );\n      return Promise.reject(new Error(result.statusText));\n    });\n}\n\nexport const requestItems = <T extends unknown>(url: string, query?: RestQuery, options?: Options, items: T[] = []): Promise<T[]> => {\n  return request(url, query, options).then((result) => {\n    if (result.hasMore) {\n      const updatedOptions: Options = {\n        offset: 0,\n        ...options\n      };\n      updatedOptions.offset += result.count;\n      return requestItems(url, query, updatedOptions, result.items);\n    }\n    return items.concat(result.items);\n  });\n}\n\nexport const requestItem = <T extends unknown>(url: string, query?: RestQuery, options?: Options): Promise<T> => {\n  return request(url, query, options);\n}","import ChartComponent from 'react-chartjs-2';\nimport 'chartjs-adapter-moment';\n\nimport { Measurement } from '../../model/Measurement';\n\ntype Props = {\n  items: Measurement[]\n}\n\nexport const Chart = ({ items }: Props) => {\n\n  const data = {\n    datasets: [\n      {\n        label: 'CO2',\n        data: items.map(o => ({\n          x: o.insert_timestamp,\n          y: o.co2\n        })),\n        fill: false,\n        backgroundColor: 'rgb(255, 99, 132)',\n        borderColor: 'rgba(255, 99, 132, 0.2)',\n      },\n      {\n        label: 'Temperature',\n        data: items.map(o => ({\n          x: o.insert_timestamp,\n          y: o.temperature\n        })),\n        fill: false,\n        backgroundColor: 'rgb(255, 159, 64)',\n        borderColor: 'rgba(255, 159, 64, 0.2)',\n      },\n      {\n        label: 'Humidity',\n        data: items.map(o => ({\n          x: o.insert_timestamp,\n          y: o.humidity\n        })),\n        fill: false,\n        backgroundColor: 'rgb(255, 205, 86)',\n        borderColor: 'rgba(255, 205, 86, 0.2)',\n      },\n      {\n        label: 'Distance',\n        data: items.map(o => ({\n          x: o.insert_timestamp,\n          y: o.distance\n        })),\n        fill: false,\n        backgroundColor: 'rgb(75, 192, 192)',\n        borderColor: 'rgba(75, 192, 192, 0.2)',\n      }\n    ]\n  };\n\n  const options = {\n    animation: false,\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'hour',\n          displayFormats: {\n            hour: 'HH:mm',\n            day: 'DD.MM.YYYY'\n          }\n        }\n      },\n      y: {\n        suggestedMin: 0,\n      }\n    }\n  };\n\n  return <ChartComponent type=\"line\" data={data} options={options} />\n}\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { Container } from '@material-ui/core';\n\nimport { requestItem, requestItems } from '../../helpers/Request';\nimport { Measurement } from '../../model/Measurement';\nimport { Chart } from './Chart';\nimport { Sensor } from '../../model/Sensor';\n\ntype Params = {\n  uuid: string\n}\n\nexport const Explore = () => {\n\n  const [sensor, setSensor] = useState<Sensor>();\n  const [items, setItems] = useState<Measurement[]>([]);\n  const { uuid } = useParams<Params>();\n\n  useEffect(() => {\n    const fetchData = () => {\n      if (uuid) {\n        const date = new Date();\n        date.setHours(date.getHours() - 12);\n\n        requestItems<Measurement>(`/sensors/${uuid}/measurements`, {\n          insert_timestamp: {\n            $gte: {\n              $date: date.toISOString()\n            }\n          },\n          $orderby: {\n            insert_timestamp: 'desc'\n          }\n        })\n          .then((items) => {\n            setItems(items);\n          })\n          .catch((error) => console.log(error));\n\n        requestItem<Sensor>(`/sensors/${uuid}`)\n          .then((result) => {\n            setSensor(result);\n          })\n          .catch((error) => { console.log(error) });\n      } else {\n        setItems([]);\n        setSensor(undefined);\n      }\n    }\n\n    fetchData();\n\n    const id = setInterval(() => {\n      fetchData();\n    }, 30000);\n    return () => clearInterval(id);\n  }, [uuid]);\n\n  return (\n    <Container>\n      <h2>{sensor?.title}</h2>\n      <p>Count: {items.length}</p>\n      <Chart items={items} />\n    </Container>\n  )\n}\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport './Login.scss';\nimport { login } from './authSlice';\nimport { Button, Grid, Paper, TextField } from '@material-ui/core';\n\nexport const Login = () => {\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const dispatch = useDispatch();\n\n  const handleSubmit = (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    dispatch(\n      login(btoa(`${username}:${password}`))\n    )\n  }\n\n  return (\n    <div className=\"login-wrapper\">\n      <Paper>\n        <form onSubmit={handleSubmit}>\n          <Grid\n            container\n            direction=\"column\"\n            justify=\"center\"\n            alignItems=\"center\"\n            spacing={2}\n          >\n            <Grid item>\n              <TextField label=\"Username\" onChange={(e) => setUsername(e.target.value)} />\n            </Grid>\n            <Grid item>\n              <TextField type=\"password\" label=\"Password\" onChange={(e) => setPassword(e.target.value)} />\n            </Grid>\n            <Grid item>\n              <Button type=\"submit\">Login</Button>\n            </Grid>\n          </Grid>\n        </form>\n      </Paper>\n    </div>\n  );\n}\n","import { useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router';\n\nimport { logout } from './authSlice';\n\nexport const Logout = () => {\n\n  const dispatch = useDispatch();\n\n  dispatch(logout());\n\n  return (\n    <Redirect to=\"/\" />\n  );\n}\n","import { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { Link } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      flexGrow: 1,\n      color: 'inherit',\n      textDecoration: 'none'\n    },\n  }),\n);\n\nexport const CustomAppBar = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n          <Typography component={Link} variant=\"h6\" className={classes.title} to=\"/dashboard\">Smart Classroom</Typography>\n          <Button component={Link} color=\"inherit\" to=\"/logout\">Logout</Button>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}","import { useEffect, useState } from 'react';\nimport { Button, Card, CardActions, CardContent, makeStyles, Typography } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\n\nimport { request } from '../../helpers/Request';\nimport { Measurement } from '../../model/Measurement';\nimport { Sensor as SensorModel } from '../../model/Sensor';\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 275\n  },\n  title: {\n    fontSize: 13\n  },\n  attribute: {\n    marginTop: 10,\n    fontSize: 13\n  },\n  uuid: {\n    fontSize: 14,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  }\n});\n\ntype Props = {\n  sensor: SensorModel\n}\n\nexport const DashboardItem = ({ sensor }: Props) => {\n\n  const classes = useStyles();\n\n  const [latestMeasurement, setLatestMeasurement] = useState<Measurement>();\n  \n  useEffect(() => {\n    const fetchData = () => {\n      if (sensor) {\n        request(`/measurements?q={\"sensor_uuid\":{\"$eq\":\"${sensor.uuid}\"},\"$orderby\":{\"insert_timestamp\":\"desc\"}}?limit=1`)\n          .then((result) => {\n            if (result.count > 0) {\n              setLatestMeasurement(result.items[0]);\n            }\n          })\n          .catch((error) => {\n            console.log(error);\n          });\n      } else {\n        setLatestMeasurement(undefined);\n      }\n    }\n\n    fetchData();\n\n    const id = setInterval(() => {\n      fetchData();\n    }, 15000);\n    return () => clearInterval(id);\n  }, [sensor]);\n\n  return (\n    <Card className={classes.root}>\n      <CardContent>\n        <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\n          Sensor\n        </Typography>\n        <Typography variant=\"h6\" component=\"h2\">\n          {sensor.title}\n        </Typography>\n        <Typography className={classes.uuid} variant=\"body2\" color=\"textSecondary\">\n          {sensor.uuid}\n        </Typography>\n        <Typography className={classes.attribute} color=\"textSecondary\">\n          CO2\n        </Typography>\n        <Typography variant=\"body1\" component=\"p\">\n          {latestMeasurement ? latestMeasurement.co2.toFixed(0) : ''} ppm\n        </Typography>\n        <Typography className={classes.attribute} color=\"textSecondary\">\n          Temperature\n        </Typography>\n        <Typography variant=\"body1\" component=\"p\">\n          {latestMeasurement ? latestMeasurement.temperature.toFixed(1) : ''} C°\n        </Typography>\n        <Typography className={classes.attribute} color=\"textSecondary\">\n          Humidity\n        </Typography>\n        <Typography variant=\"body1\" component=\"p\">\n          {latestMeasurement ? latestMeasurement.humidity.toFixed(0) : ''}%\n        </Typography>\n      </CardContent>\n      <CardActions>\n        <Button component={Link} size=\"small\" to={`/explore/${sensor.uuid}`}>View latest data</Button>\n      </CardActions>\n    </Card>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { createStyles, makeStyles, Theme } from '@material-ui/core';\n\nimport { request } from '../../helpers/Request';\nimport { Sensor as SensorModel } from '../../model/Sensor';\nimport { DashboardItem } from './DashboardItem';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      '& > *': {\n        margin: theme.spacing(1),\n        width: theme.spacing(16)\n      }\n    }\n  })\n);\n\nexport const Dashboard = () => {\n\n  const classes = useStyles();\n\n  const [items, setItems] = useState<SensorModel[]>([]);\n\n  useEffect(() => {\n    request(`/sensors?q={\"$orderby\":{\"title\":\"asc\"}}`)\n      .then((result) => {\n        setItems(result.items);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  const dashboardItems = items.map(sensor => <DashboardItem key={sensor.uuid} sensor={sensor} />)\n  return (\n    <div className={classes.root}>\n      {dashboardItems}\n    </div>\n  )\n}\n","import { useSelector } from 'react-redux';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from 'react-router-dom';\n\nimport './App.scss';\nimport { Explore } from './features/explore/Explore';\nimport { Login } from './features/auth/Login';\nimport { AuthState, RootState } from './model/State';\nimport { Logout } from './features/auth/Logout';\nimport { CustomAppBar } from './features/nav/CustomAppBar';\nimport { Dashboard } from './features/dashboard/Dashboard';\n\nfunction App() {\n\n  const auth = useSelector<RootState, AuthState>((state) => state.auth);\n\n  if (!auth.loggedIn) {\n    return (\n      <Login />\n    )\n  }\n\n  return (\n    <Router>\n      <CustomAppBar />\n      <Switch>\n        <Route path=\"/logout\">\n          <Logout />\n        </Route>\n        <Route path=\"/dashboard\">\n          <Dashboard />\n        </Route>\n        <Route path=\"/explore/:uuid\">\n          <Explore />\n        </Route>\n        <Route path=\"/\">\n          <Redirect to=\"/dashboard\" />\n        </Route>\n      </Switch>\n    </Router>\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { CssBaseline } from '@material-ui/core';\n\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport store from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <CssBaseline />\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}